---
import Layout from "../layouts/Layout.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";

const latestRelease = {
    version: "v14",
    date: "3 weeks ago",
    assets: [
        { name: "glazed-1.21.1-n-14.jar", url: "https://github.com/realnnpg/Glazed/releases/download/v14/glazed-1.21.1-n-14.jar", size: "604 KB", sha256: "f9200b7d5da14747b552e44b4c4ac18528014e35ca4ef11858a4ebfb40945c71" },
        { name: "glazed-1.21.4-n-14.jar", url: "https://github.com/realnnpg/Glazed/releases/download/v14/glazed-1.21.4-n-14.jar", size: "604 KB", sha256: "857c441d13e45abc5807b0480c80d5c0243aedf8eab835278dfe2bfc03571292" },
        { name: "glazed-1.21.5-n-14.jar", url: "https://github.com/realnnpg/Glazed/releases/download/v14/glazed-1.21.5-n-14.jar", size: "606 KB", sha256: "87309a8f54d0a397a06f110797ef492c1ef58f6c89231d6a6ef9bc83b27701b6" },
        { name: "glazed-1.21.8-n-14.jar", url: "https://github.com/realnnpg/Glazed/releases/download/v14/glazed-1.21.8-n-14.jar", size: "607 KB", sha256: "3d3c47bc418fa67184cfd4fc806a213aae855f4edf0f9e9c15d970d18bb55203" }
    ],
    changelog: {
        updated: [
            "ChunkFinder — Fixed",
            "CrystalMacro (Obi Place) — Ud",
            "SpawnerProtect — Fixed",
            "PearlThrow — Ud"
        ],
        new: [
            "UIHelper",
            "BedrockVoidESP",
            "ShieldBreaker",
            "AutoXP",
            "NoBlockInteract",
            "BeehiveESP",
            "FastExp",
            "WindPearlMacro",
            "QuickShieldBreaker",
            "UDTriggerBot",
            "SwordPlaceObsidian",
            "ChestAndShulkerStealer",
            "AutoRightClick",
            "DoubleAnchorMacro",
            "StunMace",
            "HoldHotbarTotem",
            "SweetBerryESP",
            "ElytraFirework",
            "PistonESP",
            "TpaAllMacro",
            "RTPNetherBaseFinder",
            "HomeReset",
            "KeyPearl",
            "DrownedTridentESP",
            "TapResetMacro",
            "SixtySevenMacro",
            "JumpResetMacro",
            "AimAssist",
            "SkeletonESP",
            "RainNoti",
            "PearlBoost",
            "AutoPearlChain",
            "AICommand",
            "AutoBlazeRodOrders",
            "SwordAxePlaceCobweb",
            "BlazeRodDropper",
            "BreachSwap",
            "FreecamMining",
            "ScoreboardModule",
            "And more…"
        ]
    }
};

const dependencies = [
    {
        name: "Meteor Client",
        url: "https://meteorclient.com",
        required: true,
        description: "The base client required to run Glazed.",
    },
    {
        name: "Fabric API",
        url: "https://modrinth.com/mod/fabric-api",
        required: true,
        description: "Essential library for Fabric mods.",
    },
    {
        name: "Baritone",
        url: "https://github.com/cabaletta/baritone",
        required: false,
        description: "Pathfinding bot (Optional but recommended).",
    },
];
---

<Layout title="Glazed - Downloads">
    <div class="pt-32 pb-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h1 class="text-4xl md:text-6xl font-heading font-bold mb-6">
                <span class="text-white">Download </span>
                <span class="text-brand-primary text-glow">Glazed</span>
            </h1>
            <p class="text-gray-400 text-xl max-w-2xl mx-auto">
                Get the latest version for DonutSMP. Always updated for the
                newest patches.
            </p>
        </div>

        <!-- Latest Release Card -->
        <div class="max-w-4xl mx-auto mb-12">
            <Card class="bg-brand-surface-highlight/50 border-brand-primary/30">
                <div class="flex flex-col gap-8">
                    <!-- Header -->
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <div class="flex items-center gap-4">
                            <span class="bg-brand-primary text-white px-3 py-1 rounded-full text-sm font-bold font-mono">LATEST</span>
                            <h2 class="text-3xl font-bold text-white">
                                Glazed {latestRelease.version}
                            </h2>
                        </div>
                        <div class="flex items-center gap-2 text-gray-400 text-sm font-mono">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {latestRelease.date}
                        </div>
                    </div>

                    <!-- Changelog -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
                        <div>
                            <h3 class="text-green-400 font-bold uppercase tracking-wider mb-3 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                                Updated Modules
                            </h3>
                            <ul class="space-y-1 text-gray-400">
                                {latestRelease.changelog.updated.map(item => (
                                    <li class="flex items-start gap-2">
                                        <span class="text-brand-primary mt-1">•</span>
                                        <span>{item}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-brand-accent font-bold uppercase tracking-wider mb-3 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                                New Modules
                            </h3>
                            <ul class="space-y-1 text-gray-400">
                                {latestRelease.changelog.new.slice(0, 15).map(item => (
                                    <li class="flex items-start gap-2">
                                        <span class="text-brand-primary mt-1">•</span>
                                        <span>{item}</span>
                                    </li>
                                ))}
                                {latestRelease.changelog.new.length > 15 && (
                                    <li class="text-gray-500 italic pl-3">And {latestRelease.changelog.new.length - 15} more...</li>
                                )}
                            </ul>
                        </div>
                    </div>

                    <!-- Assets List -->
                    <div class="space-y-3 pt-4 border-t border-white/10">
                        <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-2">Assets</h3>
                        {latestRelease.assets.map(asset => (
                            <div class="bg-black/30 rounded-lg p-4 border border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 hover:border-brand-primary/30 transition-colors group">
                                <div class="flex flex-col gap-1 w-full md:w-auto">
                                    <div class="flex items-center gap-3">
                                        <span class="text-brand-primary font-mono font-bold">{asset.name}</span>
                                        <span class="text-xs bg-white/10 px-2 py-0.5 rounded text-gray-300">{asset.size}</span>
                                    </div>
                                    <code class="text-[10px] text-gray-600 font-mono select-all" title="SHA256 Checksum">{asset.sha256}</code>
                                </div>
                                <Button href={asset.url} size="sm" class="w-full md:w-auto whitespace-nowrap group-hover:shadow-[0_0_15px_rgba(155,60,255,0.3)]">
                                    Download
                                </Button>
                            </div>
                        ))}
                    </div>
                    
                    <div class="flex justify-end">
                         <Button href="https://github.com/realnnpg/Glazed" variant="ghost" size="sm" class="text-xs">
                            View Source Code on GitHub →
                        </Button>
                    </div>
                </div>
            </Card>
        </div>

        <!-- Archive Link -->
        <div class="text-center mb-20">
            <p class="text-gray-400 mb-4">Looking for an older version?</p>
            <Button href="/archive" variant="secondary" size="md">
                View Version Archive
            </Button>
        </div>

        <!-- Dependencies -->
        <div class="mb-20">
            <h2 class="text-2xl font-heading font-bold text-white mb-8 flex items-center gap-3">
                <span class="w-8 h-1 bg-brand-primary rounded-full"></span>
                Dependencies
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {
                    dependencies.map((dep) => (
                        <Card class="group">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="text-xl font-bold text-white">
                                    {dep.name}
                                </h3>
                                {dep.required ? (
                                    <span class="text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded border border-red-500/20">
                                        REQUIRED
                                    </span>
                                ) : (
                                    <span class="text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded border border-blue-500/20">
                                        OPTIONAL
                                    </span>
                                )}
                            </div>
                            <p class="text-gray-400 text-sm mb-6 h-10">
                                {dep.description}
                            </p>
                            <a
                                href={dep.url}
                                target="_blank"
                                class="text-brand-primary text-sm font-bold hover:text-brand-accent flex items-center gap-1 transition-colors"
                            >
                                Download External
                                <svg
                                    class="w-4 h-4"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                                    />
                                </svg>
                            </a>
                        </Card>
                    ))
                }
            </div>
        </div>

        <!-- Installation Guide -->
        <div class="max-w-3xl mx-auto">
            <h2
                class="text-2xl font-heading font-bold text-white mb-8 text-center"
            >
                Installation Guide
            </h2>
            <div
                class="bg-brand-surface rounded-xl p-8 border border-white/5 relative overflow-hidden"
            >
                <!-- Steps -->
                <ol class="relative border-l border-gray-700 ml-3 space-y-8">
                    <li class="mb-10 ml-6">
                        <span
                            class="absolute flex items-center justify-center w-8 h-8 bg-brand-surface-highlight rounded-full -left-4 ring-4 ring-brand-dark border border-brand-primary text-brand-primary font-bold"
                            >1</span
                        >
                        <h3
                            class="flex items-center mb-1 text-lg font-semibold text-white"
                        >
                            Install Fabric
                        </h3>
                        <p class="mb-4 text-base font-normal text-gray-400">
                            Download and install the Fabric Loader for your Minecraft version (1.21.x).
                        </p>
                    </li>
                    <li class="mb-10 ml-6">
                        <span
                            class="absolute flex items-center justify-center w-8 h-8 bg-brand-surface-highlight rounded-full -left-4 ring-4 ring-brand-dark border border-brand-primary text-brand-primary font-bold"
                            >2</span
                        >
                        <h3
                            class="flex items-center mb-1 text-lg font-semibold text-white"
                        >
                            Download Mods
                        </h3>
                        <p class="mb-4 text-base font-normal text-gray-400">
                            Get Meteor Client, Fabric API, and the correct Glazed.jar for your version.
                        </p>
                    </li>
                    <li class="ml-6">
                        <span
                            class="absolute flex items-center justify-center w-8 h-8 bg-brand-surface-highlight rounded-full -left-4 ring-4 ring-brand-dark border border-brand-primary text-brand-primary font-bold"
                            >3</span
                        >
                        <h3
                            class="flex items-center mb-1 text-lg font-semibold text-white"
                        >
                            Drop into Folder
                        </h3>
                        <p class="mb-4 text-base font-normal text-gray-400">
                            Move all .jar files into your <code
                                class="bg-black px-2 py-1 rounded text-gray-300 font-mono text-sm"
                                >.minecraft/mods</code
                            > folder.
                        </p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
</Layout>
